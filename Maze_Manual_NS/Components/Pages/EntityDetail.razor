@page "/entitydetail/{CharacterId:int}"
@using Maze_Manual_NS.Services
@using Maze_Manual_NS.models
@inject ICharacterService CharacterService

<div class="entity-detail-container">
    <div class="description">
        @if (monster == null)
        {
            <h2>@player.Name</h2>
            <p>Health: @player.Health</p>
            <p>Damage: @player.Damage</p>
            <br/>
            <p>@player.Description</p>
        }
        else
        {
            <h2>@monster.Name</h2>
            <p>Health: @monster.Health</p>
            <p>Damage: @monster.Damage</p>
            <br/>
            <p>@monster.Description</p>
        }
    </div>
    
    <div class="image-container">
        @if (monster == null)
        {
        <img src="@player.ImgUrl" alt="@player.Name"/>
        }
        else
        {
        <img src="@monster.ImgUrl" alt="@monster.Name"/>
        }
    </div>
</div>

@code
{
    [Parameter] 
    public int CharacterId { get; set; }

    private Monster monster;
    private Player player;

    protected override void OnInitialized()
    {
        var entity = CharacterService.Entities.FirstOrDefault(e => e.CharacterId == CharacterId);

        switch (entity)
        {
            case Monster foundMonster:
                monster = foundMonster;
                break;
            case Player foundPlayer:
                player = foundPlayer;
                break;
        }
    }
}
